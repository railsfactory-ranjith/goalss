
<%= javascript_include_tag 'prototype.js', 'lightbox.js'%>
<%= stylesheet_link_tag 'lightbox'%>
<%= stylesheet_link_tag 'pagination'%>
<script type="text/javascript">
function  GetCheckBoxValue()
{
  var x = (document.getElementById("ctl00_contentMain_chkAddSame").checked);
  if (x==true)
  {   
    document.getElementById("user_profile_organization").value = document.getElementById("billing_company_name").value;
    document.getElementById("user_profile_first_name").value = document.getElementById("billing_first_name").value;
    document.getElementById("user_profile_last_name").value = document.getElementById("billing_last_name").value;
    document.getElementById("user_profile_mailing_address1").value = document.getElementById("billing_address_1").value;
    document.getElementById("user_profile_mailing_address2").value = document.getElementById("billing_address_2").value;
    document.getElementById("user_profile_country").value = document.getElementById("billing_country").value;
    document.getElementById("user_profile_city").value = document.getElementById("billing_city").value;
    document.getElementById("user_profile_state").value = document.getElementById("billing_state").value;
    document.getElementById("user_profile_zipcode").value = document.getElementById("billing_zipcode").value;
    document.getElementById("user_profile_mobile_phone").value = document.getElementById("billing_phonenumber").value;
    document.getElementById("user_profile_office_email_address").value = document.getElementById("billing_email_address").value;
  } 
  else
  { 
    document.getElementById("user_profile_organization").value = '';
    document.getElementById("user_profile_first_name").value = '';
    document.getElementById("user_profile_last_name").value = '';
    document.getElementById("user_profile_mailing_address1").value = '';
    document.getElementById("user_profile_mailing_address2").value = '';
    document.getElementById("user_profile_country").value = "";
    document.getElementById("user_profile_city").value = '';
    document.getElementById("user_profile_state").value = '';
    document.getElementById("user_profile_zipcode").value = '';
    document.getElementById("user_profile_mobile_phone").value = '';
    document.getElementById("user_profile_office_email_address").value = '';
  }
}
</script>
<!--<div class="orange_color">GroupHopper Development going well. Site will be down on 23rd Feb 10AM-11AM PST</div>-->

<div class="signup1">My Account<%if flash.now[:notice]%>
<span style="color:green; font:12px; margin-left:250px;">
<%= flash.now[:notice]%></span> <%end%><%if flash.now[:error]%><span style="color:red; font:12px; margin-left:250px;">
<%= flash.now[:error]%></span> <%end%></div>
<div class="down_arrow"><img src="/images/down_arrow.jpg" alt="down_arrow" /></div>
<div class="clear"><!-- --></div>
<!-- left sign div start here-->
<div class="left_sign">

  <div class="clear"><!-- --></div>
  <div class="inform_account">Billing Information</div>
  <div class="clear"><!-- --></div>
  <div class="inne_right_myaccount">
    <% form_for :billing, :url => {:controller=>'admin/billing_informations', :action => 'update_billing',:id=>@group.id} do |f| %>
    <div class="<%= @billing.errors["organization"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:hidden;">*</span>Organization:</div>
    <%= f.text_field :company_name , :class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["first_name"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>First Name:  </div>
    <%= f.text_field :first_name , :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <%#= text_field :user_profile,:first_name,:value=>"#{@g.user_profile.first_name}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["last_name"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span> Last Name: </div>
    <%= f.text_field :last_name , :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["address_1"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:visible;">*</span>Address 1: </div>
    <%= f.text_field :address_1 , :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["address_2"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:hidden;">*</span>Address 2: </div>
    <%= f.text_field :address_2 , :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
    <div class="inne_label_account">
    <span class="star">*</span>Country: </div>
    <% list_country%>
    <%= select :billing,:country,@country, {:selected=>@billing.country}, :class=>"inner_field" %>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["city"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>City: </div>
    <%= f.text_field :city , :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["state"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>State: </div>
    <%= f.text_field :state , :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["zipcode"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>PostalCode: </div>
    <%= f.text_field :zipcode , :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["phonenumber"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>Phone: </div>
    <%= f.text_field :phonenumber, :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @billing.errors["email_address"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>Email: </div>
    <%= f.text_field :email_address, :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
    <div class="clear"><!-- --></div>
      <div class="checkbox-wrap">
        <span class="checkbox"><br>
        <input type="checkbox" onclick="return GetCheckBoxValue();" name="contact information" id="ctl00_contentMain_chkAddSame" />       
        </span>
        <span class="checkbox-text" style="font-size:12px;padding-bottom:5px;color:#333333">Same as Billing Information:</span>
      </div>
      <div class="clear"><!-- --></div>
    <div class="credit_card">Contact Information</div>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["first_name"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>First Name:</div>
    <%= text_field :user_profile,:first_name,:value=>"#{@g.user_profile.first_name}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["last_name"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>Last Name:  </div>
    <%= text_field :user_profile,:last_name,:value=>"#{@g.user_profile.last_name}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["organization"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star"  style="visibility:hidden;">*</span>Organization: </div>
    <%= text_field :user_profile,:organization,:value=>"#{@g.user_profile.organization}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="inne_label_account">
    <span class="star" style="visibility:hidden;">*</span>Title:</div>
    <%#= text_field :user_profile,:organization,:value=>"",:class=>"inner_field"%>
    <%= text_field :user_profile,:title,:value=>"#{@g.user_profile.title}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["mailing_address1"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star"  style="visibility:hidden;">*</span>Address 1: </div>
    <%= text_field :user_profile,:mailing_address1,:value=>"#{@g.user_profile.mailing_address1}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["mailing_address2"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:hidden;">*</span>  Address 2: </div>
    <%= text_field :user_profile,:mailing_address2,:value=>"#{@g.user_profile.mailing_address1}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="inne_label_account">
    <span class="star">*</span>Country: </div>
    <% list_country%>
    <%= select :user_profile,:country,@country, {:selected=>@g.user_profile.country}, :class=>"inner_field" %>
    <%#= select :user_profile, :country, @country,{:prompt=>"-select-"},:class=>"inner_field" %>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["state"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:hidden;">*</span>State: </div>
    <%= text_field :user_profile,:state,:value=>"#{@g.user_profile.state}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["city"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:hidden;">*</span>City: </div>
    <%= text_field :user_profile,:city,:value=>"#{@g.user_profile.city}",:class=>"inner_field"%>  
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["zipcode"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star">*</span>PostalCode: </div>
    <%= text_field :user_profile,:zipcode,:value=>"#{@g.user_profile.zipcode}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["mobile_phone"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:hidden;">*</span>Phone Number: </div>
    <%= text_field :user_profile,:mobile_phone,:value=>"#{@g.user_profile.mobile_phone}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["office_phone"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star"  style="visibility:hidden;">*</span>2nd Phone Number: </div>
    <%= text_field :user_profile,:office_phone,:value=>"#{@g.user_profile.office_phone}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
    <div class="<%= @g.user_profile.errors["office_email_address"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
    <span class="star" style="visibility:hidden;">*</span>Email Address: </div>
    <%= text_field :user_profile,:office_email_address,:value=>"#{@g.user_profile.office_email_address}",:class=>"inner_field"%>
    <div class="clear"><!-- --></div>
     <%=image_submit_tag "update.jpg",:class=>"update",:id=>"update_billing"%>
     <%= link_to image_tag("cancel.jpg",:style =>"margin-right:5px;",:class=>"cancel_new") ,"/admin/billing_informations/owner_account/#{@group.id}"%><% end %> 
  </div>
<div class="clear"><!-- --></div>
</div>
<!-- left sign div ends here-->

<!-- right sign div strat here-->
<div class="right_sign_account">
<div class="invite_header">CSR Activity Log</div>
    
        <div class="new_group_right"><%= link_to "View Log",view_log_group_admin_billing_informations_path(:id=>@group.user_id)%></div>
    
<div class="inform_right_account">Current Plan</div>

<div class="clear"><!-- --></div>
<div class="inne_right_rightaccount">
  <div class="change_plan">Group Plan Name 
  <a id="select_plan" href="/admin/billing_informations/select_plan/<%= @group.id %>"">Change Plan</a>
<script>new lightbox($('select_plan'), {className:'lightbox_container'});</script></div>
<div class="clear"><!-- --></div>
<div class="inner_plan" style="margin-top:10px;">$<%=h @plan.amount%> per month</div>
<div class="clear"><!-- --></div>
<div class="inner_plan">Includes<span class="orange_col"><%=h @plan.max_users_in_group%></span> users per group</div>
<div class="clear"><!-- --></div>
<div class="inner_plan">Includes<span class="orange_col"><%=h @plan.max_group%></span> groups</div>
<div class="clear"><!-- --></div>
<div class="inner_plan"><div class="inner_plan_inside">Groups allowed in current plan:</div><span class="orange_col"><%=h @plan.max_group%></span></div>
<div class="clear"><!-- --></div>
<div class="inner_plan"><div class="inner_plan_inside">Groups used:</div><span class="orange_col"><%=h (@group_count).count%></span></div>

<div class="clear"><!-- --></div>
<div class="inner_plan"><div class="inner_plan_inside">Groups avaliable:</div><span class="orange_col"><%=h @plan.max_group-(@group_count).count %></span></div>
<div class="clear"><!-- --></div>

<div class="group_table">
    <div class="clear"><!-- --></div>
    <div id="group_lists">
    <%=render :partial=>"group_list"%>
    </div>
</div>
<div class="digg_pagination">
<%=will_paginate @grous%>
</div> 
<div class="inform_right_account" style="margin-top:10px;">Billing History</div>
  <div class="change_plan"  style="margin-top:10px;">
  <a href="<%= billing_history_admin_billing_informations_path(:id=>@group.user.id)%>"> View Billing History</a>
  </div>
  <div class="clear"><!-- --></div>
  <div class="credit_card">Credit Card</div>
  <div class="clear"><!-- --></div>
  <% form_for :creditcard, :url => {:controller=>'admin/billing_informations', :action => 'update_creditcard',:id=>@group.id} do |f| %>
  <div class="inne_label_account"><span class="star">*</span>Card Type:</div>
  <% list_creditcard %>
  <%#= select :billing,:country,@country, {:selected=>@billing.country}, :class=>"inner_field" %>
  <%= select :creditcard,:card_type, @card_type,{:selected=> @creditcard.card_type},:class=>"inner_field" %>
  <div class="clear"><!-- --></div>
  <div class="<%= @creditcard.errors["card_type"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
  <span class="star">*</span>Card Number:</div>
  <%= f.text_field :last_digit, :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
  <div class="clear"><!-- --></div>
  <div class="<%= @creditcard.errors["ccv_number"] ? 'inne_label_account_red' : 'inne_label_account'  %>">
  <span class="star">*</span>CCV Number:</div>
  <%= f.password_field :ccv_number, :class=>"inner_field",:maxlength=>40, :onkeyup=>"return ismaxlength(this)"%>
  <div class="clear"><!-- --></div>
  <div class="inne_label_account"><span class="star">*</span>Expiration:</div>
  <%=select("creditcard","exp_month",(01..12).entries, {:selected=>@creditcard.exp_month}, :class=>"inner_birth" )%>
  <%=select("creditcard","exp_year",(Time.now.year..Time.now.year+40).entries, {:selected=>@creditcard.exp_year}, :class=>"inner_birth" )%>
  <div class="clear"><!-- --></div>
  <div class="clear"><!-- --></div>
  <div class="update" style="margin-right:255px"><%= image_submit_tag "/images/update.jpg",:id=>"login" %></div>
  <%= link_to image_tag("cancel.jpg",:style =>"margin-right:5px;",:class=>"cancel_new") ,"/admin/billing_informations/owner_account/#{@group.id}"%>
  <div class="sign_up"></div>
  <%end%>
</div>
</div>
<div class="clear"><!-- --></div>



